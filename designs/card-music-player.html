<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Music Player — UI Vault</title>
<style>
/* ============================================================
   DESIGN TOKENS
   Midnight Rose — Deep navy with rose gold accents. Luxury feel.
   ============================================================ */
:root {
  --bg: #001F3F;
  --bg-glow: radial-gradient(ellipse at 50% 40%, #0A2A4A 0%, #001F3F 70%);
  --surface: #0A2647;
  --surface-hover: #0D2E55;
  --accent: #B76E79;
  --accent-soft: rgba(183,110,121,0.15);
  --accent-glow: rgba(183,110,121,0.3);
  --text: #E8D5D0;
  --text-secondary: rgba(232,213,208,0.6);
  --text-dim: rgba(232,213,208,0.35);
  --border: rgba(183,110,121,0.2);
  --border-hover: rgba(183,110,121,0.35);
  --radius: 16px;
  --radius-sm: 8px;
  --radius-lg: 24px;
  --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  --font-serif: Georgia, "Times New Roman", serif;
  --shadow: 0 4px 24px rgba(0,15,30,0.4);
  --shadow-lg: 0 12px 48px rgba(0,15,30,0.5);
}

/* ============================================================
   RESET & BASE
   ============================================================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: var(--font);
  background: var(--bg-glow);
  color: var(--text);
  line-height: 1.5;
  min-height: 100dvh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
}

/* ============================================================
   PAGE STRUCTURE
   ============================================================ */
.page {
  max-width: 460px;
  margin: 0 auto;
  padding: 48px 20px 120px;
  display: flex;
  flex-direction: column;
  gap: 0;
}

/* ============================================================
   HEADER
   ============================================================ */
.page-header {
  text-align: center;
  margin-bottom: 28px;
}

.page-eyebrow {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 0.7rem;
  font-weight: 700;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--accent);
  margin-bottom: 8px;
}

.page-eyebrow svg { width: 14px; height: 14px; }

.page-title {
  font-size: clamp(1.5rem, 4vw, 2rem);
  font-weight: 800;
  letter-spacing: -0.02em;
  line-height: 1.15;
  color: var(--text);
  text-wrap: balance;
}

.page-subtitle {
  font-size: 0.9rem;
  color: var(--text-secondary);
  margin-top: 4px;
}

/* ============================================================
   PLAYER CARD
   ============================================================ */
.player-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 28px 24px 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
  box-shadow: var(--shadow-lg);
}

/* Album Art */
.album-art {
  width: 240px;
  height: 240px;
  border-radius: var(--radius);
  background: linear-gradient(145deg, #B76E79 0%, #4A2040 50%, #0A2647 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 8px 32px rgba(183,110,121,0.2);
  will-change: transform;
}

.album-art svg {
  width: 80px;
  height: 80px;
  opacity: 0.6;
}

.album-glow {
  position: absolute;
  inset: 0;
  border-radius: var(--radius);
  border: 2px solid transparent;
  pointer-events: none;
}

/* Track Info */
.track-info {
  text-align: center;
}

.track-title {
  font-family: var(--font-serif);
  font-size: 1.35rem;
  font-weight: 700;
  color: var(--text);
  letter-spacing: -0.01em;
  line-height: 1.2;
}

.track-artist {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin-top: 2px;
}

/* Progress Bar */
.progress-area {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.progress-bar-wrap {
  width: 100%;
  height: 4px;
  background: rgba(183,110,121,0.12);
  border-radius: 2px;
  cursor: pointer;
  position: relative;
}

.progress-bar-fill {
  height: 100%;
  width: 0%;
  background: var(--accent);
  border-radius: 2px;
  position: relative;
}

.progress-bar-fill::after {
  content: '';
  position: absolute;
  right: -5px;
  top: 50%;
  transform: translateY(-50%);
  width: 10px;
  height: 10px;
  background: var(--accent);
  border-radius: 50%;
  box-shadow: 0 0 8px var(--accent-glow);
  opacity: 0;
}

.progress-bar-wrap:hover .progress-bar-fill::after {
  opacity: 1;
}

.progress-times {
  display: flex;
  justify-content: space-between;
  font-size: 0.7rem;
  color: var(--text-dim);
  font-variant-numeric: tabular-nums;
}

/* Controls */
.controls {
  display: flex;
  align-items: center;
  gap: 16px;
}

.ctrl-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  padding: 8px;
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 44px;
  min-height: 44px;
}

.ctrl-btn:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

.ctrl-btn svg {
  width: 20px;
  height: 20px;
}

.ctrl-btn.play-btn {
  width: 56px;
  height: 56px;
  background: var(--accent);
  border-radius: 50%;
  color: #001F3F;
  box-shadow: 0 4px 20px var(--accent-glow);
}

.ctrl-btn.play-btn svg {
  width: 24px;
  height: 24px;
}

.ctrl-btn.active {
  color: var(--accent);
}

/* Equalizer */
.equalizer {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 32px;
}

.eq-bar {
  width: 4px;
  background: var(--accent);
  border-radius: 2px;
  transform-origin: bottom;
  will-change: transform;
}

/* Volume */
.volume-area {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 0 4px;
}

.volume-icon {
  width: 18px;
  height: 18px;
  color: var(--text-secondary);
  flex-shrink: 0;
}

.volume-track {
  flex: 1;
  height: 3px;
  background: rgba(183,110,121,0.12);
  border-radius: 2px;
  position: relative;
  cursor: pointer;
}

.volume-fill {
  height: 100%;
  width: 70%;
  background: var(--accent);
  border-radius: 2px;
}

.volume-label {
  font-size: 0.7rem;
  color: var(--text-dim);
  font-variant-numeric: tabular-nums;
  min-width: 28px;
  text-align: right;
}

/* ============================================================
   PLAYLIST
   ============================================================ */
.playlist {
  margin-top: 16px;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.playlist-heading {
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--text-secondary);
  margin-bottom: 8px;
  padding: 0 4px;
}

.track-row {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  position: relative;
}

.track-row.active {
  background: var(--accent-soft);
  border-left: 3px solid var(--accent);
  box-shadow: inset 0 0 20px rgba(183,110,121,0.06);
}

.track-num {
  font-size: 0.75rem;
  font-variant-numeric: tabular-nums;
  color: var(--text-dim);
  width: 20px;
  text-align: center;
}

.track-row.active .track-num {
  color: var(--accent);
}

.track-row-info {
  flex: 1;
  min-width: 0;
}

.track-row-title {
  font-family: var(--font-serif);
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.track-row-artist {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

.track-row-dur {
  font-size: 0.72rem;
  font-variant-numeric: tabular-nums;
  color: var(--text-dim);
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 480px) {
  .page { padding: 32px 16px 100px; }
  .player-card { padding: 22px 18px 20px; }
  .album-art { width: 200px; height: 200px; }
  .controls { gap: 12px; }
}

/* ============================================================
   ACCESSIBILITY
   ============================================================ */
*:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
  border-radius: 4px;
}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
<script src="../animations/gsap-utils.js"></script>
</head>
<body>

<div class="page">

  <!-- Header -->
  <header class="page-header">
    <div class="page-eyebrow">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18V5l12-2v13"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="16" r="3"/></svg>
      Music Player
    </div>
    <h1 class="page-title">Midnight Rose</h1>
    <p class="page-subtitle">Luxury audio experience</p>
  </header>

  <!-- Player Card -->
  <div class="player-card" role="region" aria-label="Music player">

    <!-- Album Art -->
    <div class="album-art" aria-hidden="true">
      <svg viewBox="0 0 80 80" fill="none" stroke="#E8D5D0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M32 64V16l32-5.33V58.67"/>
        <circle cx="24" cy="64" r="8"/>
        <circle cx="56" cy="58.67" r="8"/>
      </svg>
      <div class="album-glow"></div>
    </div>

    <!-- Track Info -->
    <div class="track-info">
      <div class="track-title">Midnight Serenade</div>
      <div class="track-artist">Luna Rose</div>
    </div>

    <!-- Equalizer -->
    <div class="equalizer" aria-hidden="true">
      <div class="eq-bar" style="height:12px"></div>
      <div class="eq-bar" style="height:20px"></div>
      <div class="eq-bar" style="height:16px"></div>
      <div class="eq-bar" style="height:24px"></div>
      <div class="eq-bar" style="height:18px"></div>
    </div>

    <!-- Progress -->
    <div class="progress-area" role="slider" aria-label="Track progress" aria-valuemin="0" aria-valuemax="252" aria-valuenow="154" tabindex="0">
      <div class="progress-bar-wrap">
        <div class="progress-bar-fill" id="progress-fill"></div>
      </div>
      <div class="progress-times">
        <span id="time-current">2:34</span>
        <span id="time-total">4:12</span>
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <button class="ctrl-btn" id="btn-shuffle" aria-label="Shuffle" title="Shuffle">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/><line x1="4" y1="4" x2="9" y2="9"/></svg>
      </button>
      <button class="ctrl-btn" aria-label="Previous track" title="Previous">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="19 20 9 12 19 4 19 20"/><line x1="5" y1="19" x2="5" y2="5"/></svg>
      </button>
      <button class="ctrl-btn play-btn" id="btn-play" aria-label="Play" title="Play">
        <svg class="icon-play" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="6 3 20 12 6 21 6 3"/></svg>
        <svg class="icon-pause" viewBox="0 0 24 24" fill="currentColor" stroke="none" style="display:none"><rect x="5" y="3" width="4" height="18" rx="1"/><rect x="15" y="3" width="4" height="18" rx="1"/></svg>
      </button>
      <button class="ctrl-btn" aria-label="Next track" title="Next">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 4 15 12 5 20 5 4"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
      </button>
      <button class="ctrl-btn" id="btn-repeat" aria-label="Repeat" title="Repeat">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/><polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/></svg>
      </button>
    </div>

    <!-- Volume -->
    <div class="volume-area">
      <svg class="volume-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></svg>
      <div class="volume-track" role="slider" aria-label="Volume" aria-valuemin="0" aria-valuemax="100" aria-valuenow="70" tabindex="0">
        <div class="volume-fill" id="volume-fill"></div>
      </div>
      <span class="volume-label">70%</span>
    </div>
  </div>

  <!-- Playlist -->
  <div class="playlist" role="list" aria-label="Playlist">
    <div class="playlist-heading">Up Next</div>
    <div class="track-row active" role="listitem" tabindex="0">
      <span class="track-num">1</span>
      <div class="track-row-info">
        <div class="track-row-title">Midnight Serenade</div>
        <div class="track-row-artist">Luna Rose</div>
      </div>
      <span class="track-row-dur">4:12</span>
    </div>
    <div class="track-row" role="listitem" tabindex="0">
      <span class="track-num">2</span>
      <div class="track-row-info">
        <div class="track-row-title">Velvet Horizon</div>
        <div class="track-row-artist">Luna Rose</div>
      </div>
      <span class="track-row-dur">3:48</span>
    </div>
    <div class="track-row" role="listitem" tabindex="0">
      <span class="track-num">3</span>
      <div class="track-row-info">
        <div class="track-row-title">Golden Hour Fade</div>
        <div class="track-row-artist">Luna Rose</div>
      </div>
      <span class="track-row-dur">5:01</span>
    </div>
    <div class="track-row" role="listitem" tabindex="0">
      <span class="track-num">4</span>
      <div class="track-row-info">
        <div class="track-row-title">Crimson Lullaby</div>
        <div class="track-row-artist">Luna Rose</div>
      </div>
      <span class="track-row-dur">3:22</span>
    </div>
    <div class="track-row" role="listitem" tabindex="0">
      <span class="track-num">5</span>
      <div class="track-row-info">
        <div class="track-row-title">Dawn Interlude</div>
        <div class="track-row-artist">Luna Rose</div>
      </div>
      <span class="track-row-dur">4:35</span>
    </div>
  </div>
</div>

<script>
(function() {
  'use strict';
  gsap.registerPlugin(ScrollTrigger, Flip, TextPlugin);

  var isReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // ── DOM ──
  var albumArt = document.querySelector('.album-art');
  var albumGlow = document.querySelector('.album-glow');
  var progressFill = document.getElementById('progress-fill');
  var eqBars = document.querySelectorAll('.eq-bar');
  var btnPlay = document.getElementById('btn-play');
  var iconPlay = btnPlay.querySelector('.icon-play');
  var iconPause = btnPlay.querySelector('.icon-pause');
  var btnShuffle = document.getElementById('btn-shuffle');
  var btnRepeat = document.getElementById('btn-repeat');
  var trackRows = document.querySelectorAll('.track-row');
  var ctrlBtns = document.querySelectorAll('.ctrl-btn:not(.play-btn)');

  var isPlaying = false;
  var progressTween = null;

  // ── Page entrance ──
  UV.initPage({
    title: '.page-header',
    content: '.player-card'
  });

  // ── Album art pulse (when "playing") ──
  var artPulse = null;
  function startArtPulse() {
    if (isReduced || artPulse) return;
    artPulse = gsap.to(albumArt, {
      scale: 1.02,
      duration: 2,
      yoyo: true,
      repeat: -1,
      ease: 'sine.inOut'
    });
  }
  function stopArtPulse() {
    if (artPulse) {
      artPulse.kill();
      artPulse = null;
      gsap.to(albumArt, { scale: 1, duration: 0.4, ease: 'power2.out' });
    }
  }

  // ── Album glow border animation ──
  if (!isReduced) {
    gsap.to(albumGlow, {
      boxShadow: 'inset 0 0 20px rgba(183,110,121,0.25)',
      duration: 2,
      yoyo: true,
      repeat: -1,
      ease: 'sine.inOut'
    });
  }

  // ── Equalizer bars ──
  var eqTimelines = [];
  function startEqualizer() {
    if (isReduced) return;
    eqBars.forEach(function(bar, i) {
      var tl = gsap.to(bar, {
        scaleY: 'random(0.3, 1)',
        duration: 'random(0.2, 0.4)',
        repeat: -1,
        yoyo: true,
        ease: 'power1.inOut',
        delay: i * 0.05
      });
      eqTimelines.push(tl);
    });
  }
  function stopEqualizer() {
    eqTimelines.forEach(function(tl) { tl.kill(); });
    eqTimelines = [];
    eqBars.forEach(function(bar) {
      gsap.to(bar, { scaleY: 0.15, duration: 0.3, ease: 'power2.out' });
    });
  }

  // ── Progress bar animation ──
  function startProgress() {
    if (isReduced) {
      gsap.set(progressFill, { width: '61%' });
      return;
    }
    // Start from current position (~61% = 2:34 of 4:12)
    progressTween = gsap.fromTo(progressFill,
      { width: '61%' },
      { width: '100%', duration: 98, ease: 'none' }
    );
  }
  function stopProgress() {
    if (progressTween) progressTween.pause();
  }
  function resumeProgress() {
    if (progressTween) progressTween.play();
  }

  // ── Initial state: set progress to 61% ──
  gsap.set(progressFill, { width: '61%' });

  // ── Play / Pause toggle ──
  btnPlay.addEventListener('click', function() {
    isPlaying = !isPlaying;
    if (isPlaying) {
      iconPlay.style.display = 'none';
      iconPause.style.display = 'block';
      btnPlay.setAttribute('aria-label', 'Pause');
      startArtPulse();
      startEqualizer();
      if (progressTween) resumeProgress();
      else startProgress();
    } else {
      iconPlay.style.display = 'block';
      iconPause.style.display = 'none';
      btnPlay.setAttribute('aria-label', 'Play');
      stopArtPulse();
      stopEqualizer();
      stopProgress();
    }

    // Button press scale feedback
    if (!isReduced) {
      gsap.fromTo(btnPlay, { scale: 0.9 }, { scale: 1, duration: 0.3, ease: 'back.out(2)' });
    }
  });

  // ── Toggle buttons (shuffle, repeat) ──
  [btnShuffle, btnRepeat].forEach(function(btn) {
    btn.addEventListener('click', function() {
      var isActive = btn.classList.toggle('active');
      if (!isReduced) {
        gsap.to(btn, {
          color: isActive ? '#B76E79' : 'rgba(232,213,208,0.6)',
          duration: 0.25,
          ease: 'power2.out'
        });
        gsap.fromTo(btn, { scale: 0.85 }, { scale: 1, duration: 0.3, ease: 'back.out(2)' });
      }
    });
  });

  // ── Control button hover: rose gold color ──
  if (!isReduced) {
    ctrlBtns.forEach(function(btn) {
      btn.addEventListener('mouseenter', function() {
        if (!btn.classList.contains('active')) {
          gsap.to(btn, { color: '#B76E79', duration: 0.2, ease: 'power2.out' });
        }
      });
      btn.addEventListener('mouseleave', function() {
        if (!btn.classList.contains('active')) {
          gsap.to(btn, { color: 'rgba(232,213,208,0.6)', duration: 0.2, ease: 'power2.out' });
        }
      });
    });
  }

  // ── Playlist stagger entrance ──
  UV.fadeIn('.track-row', {
    y: 15,
    duration: 0.4,
    stagger: 0.06,
    delay: 0.5
  });

  // ── Playlist row hover ──
  if (!isReduced) {
    trackRows.forEach(function(row) {
      row.addEventListener('mouseenter', function() {
        gsap.to(row, {
          backgroundColor: 'rgba(183,110,121,0.08)',
          duration: 0.2,
          ease: 'power2.out'
        });
      });
      row.addEventListener('mouseleave', function() {
        if (!row.classList.contains('active')) {
          gsap.to(row, {
            backgroundColor: 'rgba(0,0,0,0)',
            duration: 0.2,
            ease: 'power2.out'
          });
        }
      });
    });
  }

  // ── Play button hover glow ──
  if (!isReduced) {
    btnPlay.addEventListener('mouseenter', function() {
      gsap.to(btnPlay, {
        boxShadow: '0 6px 30px rgba(183,110,121,0.45)',
        scale: 1.08,
        duration: 0.25,
        ease: 'power2.out'
      });
    });
    btnPlay.addEventListener('mouseleave', function() {
      gsap.to(btnPlay, {
        boxShadow: '0 4px 20px rgba(183,110,121,0.3)',
        scale: 1,
        duration: 0.25,
        ease: 'power2.out'
      });
    });
  }

  // ── Entrance: album art scaleIn ──
  UV.scaleIn('.album-art', { duration: 0.7, delay: 0.2 });

  // ── Control panel ──
  UV.addControlPanel();
})();
</script>
</body>
</html>
