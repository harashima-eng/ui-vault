<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSAP Text Effects — UI Vault</title>
<style>
  *,*::before,*::after{box-sizing:border-box;margin:0}

  body{
    min-height:100dvh;
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;
    background:#0f0f0f;
    color:#e8e8e8;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* ── Page Header ── */
  .page-header{
    padding:3rem 2rem 1.5rem;
    max-width:1100px;
    margin:0 auto;
  }

  .page-header h1{
    font-size:0.75rem;
    font-weight:600;
    letter-spacing:0.15em;
    text-transform:uppercase;
    color:#06b6d4;
    margin-bottom:0.5rem;
  }

  .page-header p{
    font-size:1rem;
    color:#666;
    max-width:50ch;
    line-height:1.5;
  }

  /* ── Section Cards ── */
  .section{
    max-width:1100px;
    margin:0 auto 2.5rem;
    padding:0 2rem;
  }

  .card{
    border:1px solid rgba(255,255,255,0.08);
    border-radius:16px;
    padding:3rem;
    position:relative;
    overflow:hidden;
    background:rgba(255,255,255,0.02);
  }

  .card-label{
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-bottom:2.5rem;
  }

  .card-label span{
    font-size:0.7rem;
    font-weight:600;
    letter-spacing:0.12em;
    text-transform:uppercase;
    color:#555;
  }

  .card-label span em{
    font-style:normal;
    color:#06b6d4;
    margin-right:0.5em;
  }

  /* ── Replay Button ── */
  .replay-btn{
    display:inline-flex;
    align-items:center;
    gap:5px;
    background:rgba(255,255,255,0.06);
    color:#888;
    border:1px solid rgba(255,255,255,0.1);
    border-radius:6px;
    padding:5px 12px;
    font-size:0.7rem;
    font-weight:500;
    font-family:inherit;
    letter-spacing:0.04em;
    text-transform:uppercase;
    cursor:pointer;
  }

  .replay-btn:hover{
    background:rgba(6,182,212,0.12);
    color:#06b6d4;
    border-color:rgba(6,182,212,0.25);
  }

  .replay-btn:focus-visible{
    outline:2px solid #06b6d4;
    outline-offset:2px;
  }

  .replay-btn svg{
    width:12px;
    height:12px;
    fill:none;
    stroke:currentColor;
    stroke-width:2;
    stroke-linecap:round;
    stroke-linejoin:round;
  }

  /* ── Demo Text Areas ── */
  .demo-area{
    min-height:160px;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    overflow:hidden;
  }

  .demo-text{
    font-size:clamp(2rem, 5vw, 4rem);
    font-weight:700;
    line-height:1.15;
    letter-spacing:-0.02em;
  }

  .demo-text-lg{
    font-size:clamp(2.5rem, 6vw, 5rem);
    font-weight:800;
    line-height:1.1;
    letter-spacing:-0.03em;
  }

  /* ── 01 Typewriter ── */
  .typewriter-text{
    font-family:'SF Mono',SFMono-Regular,'Cascadia Code',Menlo,Consolas,monospace;
    font-size:clamp(1.5rem, 3.5vw, 2.5rem);
    font-weight:500;
    letter-spacing:-0.01em;
  }

  .cursor{
    display:inline-block;
    width:2px;
    height:1.1em;
    background:#06b6d4;
    vertical-align:text-bottom;
    margin-left:2px;
  }

  /* ── 02 Character Reveal ── */
  .char{
    display:inline-block;
    opacity:0;
  }

  .char-space{
    width:0.3em;
  }

  /* ── 03 Word Bounce ── */
  .bounce-word{
    display:inline-block;
    margin-right:0.25em;
    opacity:0;
  }

  .bounce-word:last-child{
    margin-right:0;
  }

  /* ── 04 Scramble ── */
  .scramble-text{
    font-family:'SF Mono',SFMono-Regular,'Cascadia Code',Menlo,Consolas,monospace;
    font-size:clamp(1.5rem, 3.5vw, 2.5rem);
    font-weight:500;
    color:#06b6d4;
  }

  /* ── 05 Gradient Sweep ── */
  .gradient-text{
    font-size:clamp(2.5rem, 7vw, 5.5rem);
    font-weight:900;
    line-height:1.05;
    letter-spacing:-0.04em;
    background:linear-gradient(
      90deg,
      #06b6d4 0%,
      #06b6d4 20%,
      #e8e8e8 20.1%,
      #e8e8e8 100%
    );
    background-size:500% 100%;
    background-position:100% 0;
    -webkit-background-clip:text;
    background-clip:text;
    -webkit-text-fill-color:transparent;
    color:transparent;
  }

  /* ── 06 Line Slide ── */
  .slide-line{
    font-size:clamp(1.5rem, 4vw, 3rem);
    font-weight:700;
    line-height:1.4;
    letter-spacing:-0.02em;
    opacity:0;
    display:block;
  }

  /* ── 07 Scale Blur ── */
  .scale-blur-text{
    font-size:clamp(2.5rem, 7vw, 5.5rem);
    font-weight:900;
    line-height:1.05;
    letter-spacing:-0.04em;
    opacity:0;
    filter:blur(20px);
    transform:scale(2);
  }

  /* ── 08 Split Flip ── */
  .flip-word{
    display:inline-block;
    margin-right:0.2em;
    perspective:600px;
  }

  .flip-word:last-child{
    margin-right:0;
  }

  .flip-inner{
    display:inline-block;
    opacity:0;
    transform:rotateX(90deg);
    transform-origin:center bottom;
  }

  /* ── Footer ── */
  .page-footer{
    padding:4rem 2rem 6rem;
    text-align:center;
  }

  .page-footer p{
    font-size:0.75rem;
    color:#444;
    letter-spacing:0.04em;
  }

  /* ── Responsive ── */
  @media(max-width:640px){
    .card{
      padding:2rem 1.5rem;
    }

    .demo-area{
      min-height:120px;
    }
  }

</style>
</head>
<body>

<header class="page-header">
  <h1>UI Vault &mdash; Text Effects</h1>
  <p>Eight GSAP-driven text animation techniques. Each section triggers on scroll; hit Replay to re-run any effect.</p>
</header>

<!-- ────────────────────────────────────────────────── -->
<!-- 01 — Typewriter                                    -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s01">
  <div class="card">
    <div class="card-label">
      <span><em>01</em> Typewriter</span>
      <button class="replay-btn" data-section="s01" aria-label="Replay typewriter animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <p class="typewriter-text" id="typewriter-target"></p><span class="cursor" id="cursor"></span>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 02 — Character Reveal                              -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s02">
  <div class="card">
    <div class="card-label">
      <span><em>02</em> Character Reveal</span>
      <button class="replay-btn" data-section="s02" aria-label="Replay character reveal animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <h2 class="demo-text-lg" id="char-reveal-target"></h2>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 03 — Word Bounce                                   -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s03">
  <div class="card">
    <div class="card-label">
      <span><em>03</em> Word Bounce</span>
      <button class="replay-btn" data-section="s03" aria-label="Replay word bounce animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <h2 class="demo-text" id="bounce-target"></h2>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 04 — Scramble / Decode                             -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s04">
  <div class="card">
    <div class="card-label">
      <span><em>04</em> Scramble / Decode</span>
      <button class="replay-btn" data-section="s04" aria-label="Replay scramble decode animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <p class="scramble-text" id="scramble-target"></p>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 05 — Gradient Sweep                                -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s05">
  <div class="card">
    <div class="card-label">
      <span><em>05</em> Gradient Sweep</span>
      <button class="replay-btn" data-section="s05" aria-label="Replay gradient sweep animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <h2 class="gradient-text" id="gradient-target">Illuminate</h2>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 06 — Line-by-Line Slide                            -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s06">
  <div class="card">
    <div class="card-label">
      <span><em>06</em> Line-by-Line Slide</span>
      <button class="replay-btn" data-section="s06" aria-label="Replay line slide animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <div id="line-slide-target">
        <span class="slide-line">Design is not decoration.</span>
        <span class="slide-line">It is communication</span>
        <span class="slide-line">at its most refined.</span>
      </div>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 07 — Scale + Blur Entrance                         -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s07">
  <div class="card">
    <div class="card-label">
      <span><em>07</em> Scale + Blur</span>
      <button class="replay-btn" data-section="s07" aria-label="Replay scale blur animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <h2 class="scale-blur-text" id="scale-blur-target">Focus.</h2>
    </div>
  </div>
</section>

<!-- ────────────────────────────────────────────────── -->
<!-- 08 — Split Flip                                    -->
<!-- ────────────────────────────────────────────────── -->
<section class="section" id="s08">
  <div class="card">
    <div class="card-label">
      <span><em>08</em> Split Flip</span>
      <button class="replay-btn" data-section="s08" aria-label="Replay split flip animation">
        <svg viewBox="0 0 24 24"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>
    </div>
    <div class="demo-area">
      <h2 class="demo-text" id="flip-target"></h2>
    </div>
  </div>
</section>

<footer class="page-footer">
  <p>UI Vault &mdash; GSAP Text Effects Lab</p>
</footer>

<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
<script>gsap.registerPlugin(ScrollTrigger, TextPlugin, Flip);</script>
<script src="../animations/gsap-utils.js"></script>
<script>
(function () {
  'use strict';

  /* ── Helper: split text into char spans (safe DOM approach) ── */
  function splitIntoChars(targetEl, text) {
    while (targetEl.firstChild) targetEl.removeChild(targetEl.firstChild);
    text.split('').forEach(function (ch) {
      var span = document.createElement('span');
      if (ch === ' ') {
        span.className = 'char char-space';
        span.textContent = '\u00A0';
      } else {
        span.className = 'char';
        span.textContent = ch;
      }
      targetEl.appendChild(span);
    });
  }

  /* ── Helper: split text into word spans ── */
  function splitIntoWords(targetEl, text, wordClass) {
    while (targetEl.firstChild) targetEl.removeChild(targetEl.firstChild);
    text.split(' ').forEach(function (word) {
      var span = document.createElement('span');
      span.className = wordClass;
      span.textContent = word;
      targetEl.appendChild(span);
    });
  }

  /* ── Helper: split text into flip word spans ── */
  function splitIntoFlipWords(targetEl, text) {
    while (targetEl.firstChild) targetEl.removeChild(targetEl.firstChild);
    text.split(' ').forEach(function (word) {
      var outer = document.createElement('span');
      outer.className = 'flip-word';
      var inner = document.createElement('span');
      inner.className = 'flip-inner';
      inner.textContent = word;
      outer.appendChild(inner);
      targetEl.appendChild(outer);
    });
  }


  /* ── Reduced Motion: show everything immediately ── */
  if (UV.prefersReducedMotion) {
    document.getElementById('typewriter-target').textContent = 'The quick brown fox jumps over the lazy dog.';
    document.getElementById('cursor').style.display = 'none';

    splitIntoChars(document.getElementById('char-reveal-target'), 'Every pixel matters.');
    document.querySelectorAll('.char').forEach(function (c) {
      c.style.opacity = '1';
    });

    splitIntoWords(document.getElementById('bounce-target'), 'Motion brings interfaces to life', 'bounce-word');
    document.querySelectorAll('.bounce-word').forEach(function (w) {
      w.style.opacity = '1';
    });

    document.getElementById('scramble-target').textContent = 'DECRYPTION_COMPLETE > WELCOME';
    gsap.set('#gradient-target', { backgroundPosition: '0% 0' });

    document.querySelectorAll('.slide-line').forEach(function (l) {
      l.style.opacity = '1';
    });

    gsap.set('#scale-blur-target', { opacity: 1, scale: 1, filter: 'blur(0px)' });

    splitIntoFlipWords(document.getElementById('flip-target'), 'Craft with intention');
    document.querySelectorAll('.flip-inner').forEach(function (w) {
      w.style.opacity = '1';
      w.style.transform = 'rotateX(0deg)';
    });

    UV.addControlPanel();
    return;
  }


  /* ── Storage for replay functions ── */
  var animations = {};


  /* ══════════════════════════════════════════════════ */
  /* 01 — Typewriter                                    */
  /* ══════════════════════════════════════════════════ */
  var twTarget = document.getElementById('typewriter-target');
  var twCursor = document.getElementById('cursor');
  var twText = 'The quick brown fox jumps over the lazy dog.';

  function playTypewriter() {
    twTarget.textContent = '';
    gsap.killTweensOf(twCursor);
    gsap.set(twCursor, { opacity: 1 });

    var tl = gsap.timeline();

    /* Blink cursor before typing starts */
    tl.to(twCursor, {
      opacity: 0,
      duration: 0.4,
      ease: 'steps(1)',
      repeat: 5,
      yoyo: true,
    });

    /* Type out text */
    tl.to(twTarget, {
      text: { value: twText, delimiter: '' },
      duration: 2.5,
      ease: 'none',
    });

    /* Blink cursor indefinitely after typing */
    tl.to(twCursor, {
      opacity: 0,
      duration: 0.5,
      ease: 'steps(1)',
      repeat: -1,
      yoyo: true,
    });

    return tl;
  }

  animations.s01 = playTypewriter;

  ScrollTrigger.create({
    trigger: '#s01',
    start: 'top 80%',
    once: true,
    onEnter: playTypewriter,
  });


  /* ══════════════════════════════════════════════════ */
  /* 02 — Character Reveal                              */
  /* ══════════════════════════════════════════════════ */
  var charRevealEl = document.getElementById('char-reveal-target');
  var charText = 'Every pixel matters.';

  splitIntoChars(charRevealEl, charText);
  gsap.set('#char-reveal-target .char', { opacity: 0, y: 18 });

  function playCharReveal() {
    splitIntoChars(charRevealEl, charText);
    var chars = charRevealEl.querySelectorAll('.char');
    gsap.set(chars, { opacity: 0, y: 18 });

    return gsap.to(chars, {
      opacity: 1,
      y: 0,
      duration: 0.4,
      stagger: { each: 0.03, from: 'start' },
      ease: 'power3.out',
    });
  }

  animations.s02 = playCharReveal;

  ScrollTrigger.create({
    trigger: '#s02',
    start: 'top 80%',
    once: true,
    onEnter: playCharReveal,
  });


  /* ══════════════════════════════════════════════════ */
  /* 03 — Word Bounce                                   */
  /* ══════════════════════════════════════════════════ */
  var bounceEl = document.getElementById('bounce-target');
  var bounceText = 'Motion brings interfaces to life';

  splitIntoWords(bounceEl, bounceText, 'bounce-word');
  gsap.set('#bounce-target .bounce-word', { opacity: 0, y: 60 });

  function playBounce() {
    splitIntoWords(bounceEl, bounceText, 'bounce-word');
    var words = bounceEl.querySelectorAll('.bounce-word');
    gsap.set(words, { opacity: 0, y: 60 });

    return gsap.to(words, {
      opacity: 1,
      y: 0,
      duration: 0.7,
      stagger: 0.08,
      ease: 'back.out(1.7)',
    });
  }

  animations.s03 = playBounce;

  ScrollTrigger.create({
    trigger: '#s03',
    start: 'top 80%',
    once: true,
    onEnter: playBounce,
  });


  /* ══════════════════════════════════════════════════ */
  /* 04 — Scramble / Decode                             */
  /* ══════════════════════════════════════════════════ */
  var scrambleTarget = document.getElementById('scramble-target');
  var scrambleFinal = 'DECRYPTION_COMPLETE > WELCOME';
  var scrambleChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%&*<>{}[]';

  scrambleTarget.textContent = '';

  function playScramble() {
    var length = scrambleFinal.length;
    var resolved = [];
    var i;
    for (i = 0; i < length; i++) resolved[i] = false;

    var obj = { progress: 0 };
    var tl = gsap.timeline();

    tl.to(obj, {
      progress: 1,
      duration: 2.2,
      ease: 'power2.inOut',
      onUpdate: function () {
        var p = obj.progress;
        var result = '';
        for (var j = 0; j < length; j++) {
          var charThreshold = j / length;
          if (p > charThreshold + 0.15) {
            resolved[j] = true;
          }
          if (resolved[j]) {
            result += scrambleFinal[j];
          } else if (scrambleFinal[j] === ' ' || scrambleFinal[j] === '_' || scrambleFinal[j] === '>') {
            result += scrambleFinal[j];
          } else {
            result += scrambleChars[Math.floor(Math.random() * scrambleChars.length)];
          }
        }
        scrambleTarget.textContent = result;
      },
    });

    return tl;
  }

  animations.s04 = playScramble;

  ScrollTrigger.create({
    trigger: '#s04',
    start: 'top 80%',
    once: true,
    onEnter: playScramble,
  });


  /* ══════════════════════════════════════════════════ */
  /* 05 — Gradient Sweep                                */
  /* ══════════════════════════════════════════════════ */
  var gradientTarget = document.getElementById('gradient-target');

  function playGradientSweep() {
    gsap.set(gradientTarget, { backgroundPosition: '100% 0' });
    return gsap.to(gradientTarget, {
      backgroundPosition: '0% 0',
      duration: 1.6,
      ease: 'power2.inOut',
    });
  }

  animations.s05 = playGradientSweep;

  ScrollTrigger.create({
    trigger: '#s05',
    start: 'top 80%',
    once: true,
    onEnter: playGradientSweep,
  });


  /* ══════════════════════════════════════════════════ */
  /* 06 — Line-by-Line Slide                            */
  /* ══════════════════════════════════════════════════ */
  function playLineSlide() {
    var lines = document.querySelectorAll('#line-slide-target .slide-line');
    var tl = gsap.timeline();

    lines.forEach(function (line, i) {
      var xFrom = i % 2 === 0 ? -80 : 80;
      gsap.set(line, { opacity: 0, x: xFrom });
      tl.to(line, {
        opacity: 1,
        x: 0,
        duration: 0.6,
        ease: 'power3.out',
      }, i * 0.15);
    });

    return tl;
  }

  animations.s06 = playLineSlide;

  ScrollTrigger.create({
    trigger: '#s06',
    start: 'top 80%',
    once: true,
    onEnter: playLineSlide,
  });


  /* ══════════════════════════════════════════════════ */
  /* 07 — Scale + Blur Entrance                         */
  /* ══════════════════════════════════════════════════ */
  var scaleBlurTarget = document.getElementById('scale-blur-target');

  function playScaleBlur() {
    gsap.set(scaleBlurTarget, { opacity: 0, scale: 2, filter: 'blur(20px)' });
    return gsap.to(scaleBlurTarget, {
      opacity: 1,
      scale: 1,
      filter: 'blur(0px)',
      duration: 1.2,
      ease: 'power3.out',
    });
  }

  animations.s07 = playScaleBlur;

  ScrollTrigger.create({
    trigger: '#s07',
    start: 'top 80%',
    once: true,
    onEnter: playScaleBlur,
  });


  /* ══════════════════════════════════════════════════ */
  /* 08 — Split Flip                                    */
  /* ══════════════════════════════════════════════════ */
  var flipEl = document.getElementById('flip-target');
  var flipText = 'Craft with intention';

  splitIntoFlipWords(flipEl, flipText);
  gsap.set('#flip-target .flip-inner', { opacity: 0, rotateX: 90 });

  function playFlip() {
    splitIntoFlipWords(flipEl, flipText);
    var inners = flipEl.querySelectorAll('.flip-inner');
    gsap.set(inners, { opacity: 0, rotateX: 90, transformOrigin: 'center bottom' });

    return gsap.to(inners, {
      opacity: 1,
      rotateX: 0,
      duration: 0.8,
      stagger: 0.1,
      ease: 'back.out(1.4)',
    });
  }

  animations.s08 = playFlip;

  ScrollTrigger.create({
    trigger: '#s08',
    start: 'top 80%',
    once: true,
    onEnter: playFlip,
  });


  /* ══════════════════════════════════════════════════ */
  /* Replay Buttons                                     */
  /* ══════════════════════════════════════════════════ */
  document.querySelectorAll('.replay-btn').forEach(function (btn) {
    btn.addEventListener('click', function () {
      var sectionId = btn.getAttribute('data-section');
      var playFn = animations[sectionId];
      if (playFn) playFn();
    });
  });


  /* ── Page entrance ── */
  UV.initPage({
    title: '.page-header h1',
    subtitle: '.page-header p',
  });

  /* ── Subtle card border pulse on scroll entry ── */
  document.querySelectorAll('.card').forEach(function (card) {
    ScrollTrigger.create({
      trigger: card,
      start: 'top 85%',
      once: true,
      onEnter: function () {
        gsap.fromTo(card,
          { borderColor: 'rgba(255,255,255,0.08)' },
          {
            borderColor: 'rgba(6,182,212,0.2)',
            duration: 0.6,
            ease: 'power2.out',
            yoyo: true,
            repeat: 1,
          }
        );
      },
    });
  });

  /* ── Control Panel ── */
  UV.addControlPanel();

})();
</script>
</body>
</html>
