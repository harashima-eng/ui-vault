<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Toast Notification Stack</title>
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  min-height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background-color: #F8F9FA;
  background-image: radial-gradient(circle, #d1d5db 1px, transparent 1px);
  background-size: 24px 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 64px 16px;
}

.page-header { text-align: center; margin-bottom: 48px; }

.page-title {
  font-size: 24px;
  font-weight: 700;
  color: #111827;
  line-height: 1.2;
  text-wrap: balance;
}

.page-subtitle { font-size: 14px; color: #6B7280; margin-top: 6px; }

.toast-stack {
  display: flex;
  flex-direction: column;
  gap: 12px;
  width: 100%;
  max-width: 380px;
  align-self: flex-end;
  margin-right: 10%;
}

.toast {
  position: relative;
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 14px 36px 14px 16px;
  background: #FFF;
  border: 1px solid #E5E7EB;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  overflow: hidden;
  opacity: 0;
  transform: translateX(120%);
}

.toast::before {
  content: "";
  position: absolute;
  left: 0; top: 0; bottom: 0;
  width: 3px;
  border-radius: 8px 0 0 8px;
}

.toast--success::before { background: #10B981; }
.toast--error::before   { background: #EF4444; }
.toast--warning::before { background: #F59E0B; }
.toast--info::before    { background: #3B82F6; }


.toast-icon { flex-shrink: 0; width: 20px; height: 20px; margin-top: 1px; }
.toast--success .toast-icon { color: #10B981; }
.toast--error   .toast-icon { color: #EF4444; }
.toast--warning .toast-icon { color: #F59E0B; }
.toast--info    .toast-icon { color: #3B82F6; }

.toast-body { flex: 1; min-width: 0; }

.toast-title { font-size: 14px; font-weight: 600; color: #111827; line-height: 1.3; }

.toast-desc { font-size: 13px; color: #6B7280; line-height: 1.4; margin-top: 2px; }

.toast-close {
  position: absolute;
  top: 12px; right: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px; height: 24px;
  background: none;
  border: none;
  cursor: pointer;
  color: #9CA3AF;
  padding: 0;
  border-radius: 4px;
}
.toast-close:focus-visible { outline: 2px solid #3B82F6; outline-offset: 2px; }
.toast-close svg { width: 12px; height: 12px; }

.toast-progress {
  position: absolute;
  left: 0; bottom: 0;
  height: 2px;
  width: 100%;
}

.toast--success .toast-progress { background: #10B981; }
.toast--error   .toast-progress { background: #EF4444; }
.toast--warning .toast-progress { background: #F59E0B; }
.toast--info    .toast-progress { background: #3B82F6; }


.replay-btn {
  margin-top: 16px;
  padding: 8px 20px;
  font-size: 13px;
  font-weight: 600;
  font-family: inherit;
  color: #fff;
  background: #3B82F6;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.replay-btn:focus-visible { outline: 2px solid #3B82F6; outline-offset: 2px; }

@media (max-width: 480px) {
  body { padding: 40px 16px; }
  .toast-stack { align-self: center; margin-right: 0; max-width: calc(100% - 32px); }
}
</style>
</head>
<body>

<header class="page-header">
  <h1 class="page-title">Notification System</h1>
  <p class="page-subtitle">Toast component variants</p>
  <button class="replay-btn" id="replayToasts" type="button">Replay All</button>
</header>

<div class="toast-stack" role="region" aria-label="Notifications">

  <div class="toast toast--success" role="status">
    <svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
    </svg>
    <div class="toast-body">
      <p class="toast-title">Changes saved</p>
      <p class="toast-desc">Your profile has been updated successfully.</p>
    </div>
    <button class="toast-close" aria-label="Dismiss notification">
      <svg viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><path d="M2 2l8 8M10 2l-8 8"/></svg>
    </button>
    <div class="toast-progress" aria-hidden="true"></div>
  </div>

  <div class="toast toast--error" role="alert">
    <svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
    </svg>
    <div class="toast-body">
      <p class="toast-title">Upload failed</p>
      <p class="toast-desc">The file exceeds the maximum size of 10MB.</p>
    </div>
    <button class="toast-close" aria-label="Dismiss notification">
      <svg viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><path d="M2 2l8 8M10 2l-8 8"/></svg>
    </button>
    <div class="toast-progress" aria-hidden="true"></div>
  </div>

  <div class="toast toast--warning" role="status">
    <svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
    </svg>
    <div class="toast-body">
      <p class="toast-title">Storage almost full</p>
      <p class="toast-desc">You've used 90% of your available storage.</p>
    </div>
    <button class="toast-close" aria-label="Dismiss notification">
      <svg viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><path d="M2 2l8 8M10 2l-8 8"/></svg>
    </button>
    <div class="toast-progress" aria-hidden="true"></div>
  </div>

  <div class="toast toast--info" role="status">
    <svg class="toast-icon" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
      <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
    </svg>
    <div class="toast-body">
      <p class="toast-title">New update available</p>
      <p class="toast-desc">Version 2.4 is ready to install.</p>
    </div>
    <button class="toast-close" aria-label="Dismiss notification">
      <svg viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"><path d="M2 2l8 8M10 2l-8 8"/></svg>
    </button>
    <div class="toast-progress" aria-hidden="true"></div>
  </div>

</div>
<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
<script>gsap.registerPlugin(ScrollTrigger, TextPlugin, Flip);</script>
<script src="../animations/gsap-utils.js"></script>
<script>
(function () {
  if (UV.prefersReducedMotion) {
    /* Show all toasts immediately */
    gsap.set('.toast', { opacity: 1, x: 0 });
    UV.addControlPanel();
    return;
  }

  var toasts = document.querySelectorAll('.toast');
  var progressBars = document.querySelectorAll('.toast-progress');
  var masterTL;

  function animateToasts() {
    /* Reset everything */
    gsap.set(toasts, { opacity: 0, x: '120%' });
    gsap.set(progressBars, { width: '100%' });

    masterTL = gsap.timeline();

    /* ── 1. Page header entrance ── */
    masterTL.from('.page-header', { opacity: 0, y: -20, duration: 0.5, ease: 'power3.out' });

    /* ── 2. Toast slide-in from right with stagger ── */
    toasts.forEach(function (toast, i) {
      masterTL.to(toast, {
        opacity: 1,
        x: 0,
        duration: 0.4,
        ease: 'power3.out',
      }, 0.3 + i * 0.3);
    });

    /* ── 3. Progress bars: shrink to 0 after each toast slides in ── */
    progressBars.forEach(function (bar, i) {
      masterTL.to(bar, {
        width: '0%',
        duration: 5,
        ease: 'none',
      }, 0.7 + i * 0.3);
    });
  }

  /* Initial run */
  animateToasts();

  /* ── 4. Close button: GSAP fade + scale out ── */
  document.querySelectorAll('.toast-close').forEach(function (btn) {
    /* Hover color */
    btn.addEventListener('mouseenter', function () {
      gsap.to(btn, { color: '#6B7280', duration: 0.15, ease: 'power2.out' });
    });
    btn.addEventListener('mouseleave', function () {
      gsap.to(btn, { color: '#9CA3AF', duration: 0.15, ease: 'power2.out' });
    });

    btn.addEventListener('click', function () {
      var toast = btn.closest('.toast');
      if (!toast) return;
      gsap.to(toast, {
        opacity: 0,
        scale: 0.9,
        x: 60,
        duration: 0.3,
        ease: 'power2.in',
        onComplete: function () {
          gsap.to(toast, {
            height: 0,
            padding: 0,
            marginBottom: 0,
            duration: 0.25,
            ease: 'power2.inOut',
          });
        },
      });
    });
  });

  /* ── 5. Replay: all toasts re-animate on button click ── */
  var replayBtn = document.getElementById('replayToasts');
  if (replayBtn) {
    replayBtn.addEventListener('click', function () {
      /* Restore collapsed toasts */
      gsap.set(toasts, { height: 'auto', padding: '14px 36px 14px 16px', marginBottom: '', scale: 1 });
      animateToasts();
    });
  }

  /* ── Control Panel ── */
  UV.addControlPanel();
})();
</script>
</body>
</html>
