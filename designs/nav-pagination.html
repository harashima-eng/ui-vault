<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pagination Controls</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --bg: oklch(0.13 0.015 260);
  --surface: oklch(0.18 0.02 260);
  --surface-hover: oklch(0.22 0.02 260);
  --accent: oklch(0.65 0.19 250);
  --accent-dim: oklch(0.65 0.19 250 / 0.25);
  --accent-glow: oklch(0.65 0.19 250 / 0.12);
  --text: oklch(0.95 0.005 260);
  --text-secondary: oklch(0.58 0.02 260);
  --text-muted: oklch(0.42 0.015 260);
  --border: oklch(0.28 0.015 260);
  --border-dim: oklch(0.22 0.015 260);
  --skeleton-base: oklch(0.20 0.02 260);
  --skeleton-shine: oklch(0.28 0.02 260);
  --radius: 10px;
  --radius-sm: 6px;
  --font: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
}

body{
  min-height:100dvh;
  font-family:var(--font);
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  overflow-x:hidden;
}

.backdrop{
  position:fixed;inset:0;z-index:0;
  background:
    radial-gradient(circle at 25% 15%, oklch(0.22 0.04 280 / 0.35) 0%, transparent 50%),
    radial-gradient(circle at 75% 80%, oklch(0.20 0.04 230 / 0.25) 0%, transparent 50%),
    radial-gradient(circle, oklch(0.25 0.015 260) 1px, transparent 1px);
  background-size:100% 100%, 100% 100%, 24px 24px;
}

.container{
  position:relative;z-index:1;
  max-width:800px;margin:0 auto;
  padding:48px 24px 120px;
}

.page-title{
  font-size:clamp(1.75rem,4vw,2.5rem);
  font-weight:800;letter-spacing:-0.03em;
  margin-bottom:8px;
}
.page-sub{font-size:0.9375rem;color:var(--text-secondary);margin-bottom:48px}
.page-sub .accent{color:var(--accent)}

.section-label{
  font-size:0.6875rem;font-weight:700;
  text-transform:uppercase;letter-spacing:0.14em;
  color:var(--accent);margin-bottom:20px;padding-left:2px;
}
.section-block{margin-bottom:56px}
.section-block:last-child{margin-bottom:0}

.results-meta{font-size:0.8125rem;color:var(--text-secondary);margin-bottom:16px}
.results-meta strong{color:var(--text);font-weight:600}

.content-area{margin-bottom:24px;min-height:400px;position:relative}

.item-card{
  display:flex;align-items:flex-start;gap:16px;
  padding:16px 20px;
  background:var(--surface);border:1px solid var(--border-dim);
  border-radius:var(--radius);margin-bottom:8px;
}
.item-card:last-child{margin-bottom:0}

.item-num{
  flex-shrink:0;width:32px;height:32px;
  display:flex;align-items:center;justify-content:center;
  font-size:0.75rem;font-weight:700;
  color:var(--accent);background:var(--accent-glow);
  border-radius:var(--radius-sm);
}
.item-body{flex:1;min-width:0}
.item-title{font-size:0.9375rem;font-weight:600;margin-bottom:4px}
.item-desc{font-size:0.8125rem;color:var(--text-secondary);line-height:1.5}
.item-date{font-size:0.6875rem;color:var(--text-muted);margin-top:6px}

.skeleton-card{
  display:flex;align-items:flex-start;gap:16px;
  padding:16px 20px;background:var(--surface);
  border:1px solid var(--border-dim);
  border-radius:var(--radius);margin-bottom:8px;
}
.skel-box{background:var(--skeleton-base);border-radius:var(--radius-sm)}
.skel-num{flex-shrink:0;width:32px;height:32px}
.skel-body{flex:1;display:flex;flex-direction:column;gap:8px}
.skel-title{height:14px;width:60%;border-radius:4px}
.skel-text{height:11px;width:90%;border-radius:3px}
.skel-text.short{width:40%}

.pagination{display:flex;align-items:center;justify-content:center;gap:6px;flex-wrap:wrap}

.pg-btn{
  display:inline-flex;align-items:center;justify-content:center;
  min-width:38px;height:38px;padding:0 10px;
  font-family:var(--font);font-size:0.8125rem;font-weight:500;
  color:var(--text-secondary);background:var(--surface);
  border:1px solid var(--border-dim);border-radius:var(--radius-sm);
  cursor:pointer;user-select:none;
}
.pg-btn:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.pg-btn[aria-current="page"]{
  background:var(--accent);color:oklch(0.98 0 0);
  border-color:var(--accent);font-weight:700;
}
.pg-btn[disabled]{opacity:0.3;cursor:not-allowed;pointer-events:none}
.pg-btn .arrow{font-size:1rem}

.pg-ellipsis{
  display:inline-flex;align-items:center;justify-content:center;
  min-width:30px;height:38px;color:var(--text-muted);
  font-size:0.8125rem;user-select:none;
}

.goto-row{display:flex;align-items:center;gap:8px;justify-content:center;margin-top:16px}
.goto-label{font-size:0.75rem;color:var(--text-muted)}
.goto-input{
  width:52px;height:32px;padding:0 8px;
  font-family:var(--font);font-size:0.8125rem;text-align:center;
  color:var(--text);background:var(--surface);
  border:1px solid var(--border-dim);border-radius:var(--radius-sm);
}
.goto-input:focus-visible{outline:2px solid var(--accent);outline-offset:1px}

.simple-pg{display:flex;align-items:center;justify-content:center;gap:20px}
.simple-pg .pg-btn{min-width:100px}
.simple-pg .pg-info{font-size:0.8125rem;color:var(--text-secondary);font-weight:500;white-space:nowrap}
.simple-pg .pg-info strong{color:var(--text)}

.load-more-counter{font-size:0.8125rem;color:var(--text-secondary);text-align:center;margin-bottom:16px}
.load-more-counter strong{color:var(--text);font-weight:600}

.load-more-btn{
  display:block;margin:20px auto 0;padding:12px 32px;
  font-family:var(--font);font-size:0.875rem;font-weight:600;
  color:var(--accent);background:transparent;
  border:1.5px solid var(--accent);border-radius:999px;cursor:pointer;
}
.load-more-btn:focus-visible{outline:2px solid var(--accent);outline-offset:3px}
.load-more-btn[disabled]{opacity:0.35;cursor:not-allowed;pointer-events:none}

.section-divider{height:1px;background:var(--border-dim);margin:40px 0}

@media(max-width:600px){
  .container{padding:32px 16px 100px}
  .pagination{gap:4px}
  .pg-btn{min-width:34px;height:34px;font-size:0.75rem}
  .item-card{padding:12px 14px;gap:12px}
  .simple-pg{gap:12px}
  .simple-pg .pg-btn{min-width:80px;font-size:0.75rem}
}
</style>
</head>
<body>
<div class="backdrop" aria-hidden="true"></div>
<div class="container">
  <h1 class="page-title">Pagination Controls</h1>
  <p class="page-sub">Three variants: <span class="accent">classic numbered</span>, simple navigation, and load-more.</p>

  <!-- ====== VARIANT 1: Classic Numbered ====== -->
  <div class="section-block" id="classic-section">
    <div class="section-label">Variant 1 / Classic Numbered</div>
    <div class="results-meta" id="classic-results"></div>
    <div class="content-area" id="classic-content"></div>
    <nav class="pagination" id="classic-pagination" aria-label="Pagination"></nav>
    <div class="goto-row">
      <span class="goto-label">Go to page</span>
      <input class="goto-input" id="goto-input" type="number" min="1" max="10" placeholder="..." aria-label="Go to page number">
    </div>
  </div>

  <div class="section-divider" aria-hidden="true"></div>

  <!-- ====== VARIANT 2: Simple ====== -->
  <div class="section-block" id="simple-section">
    <div class="section-label">Variant 2 / Simple</div>
    <div class="results-meta" id="simple-results"></div>
    <div class="content-area" id="simple-content"></div>
    <nav class="simple-pg" id="simple-pagination" aria-label="Simple pagination">
      <button class="pg-btn" id="simple-prev" disabled><span class="arrow">&larr;</span> Previous</button>
      <span class="pg-info" id="simple-info"></span>
      <button class="pg-btn" id="simple-next">Next <span class="arrow">&rarr;</span></button>
    </nav>
  </div>

  <div class="section-divider" aria-hidden="true"></div>

  <!-- ====== VARIANT 3: Load More ====== -->
  <div class="section-block" id="loadmore-section">
    <div class="section-label">Variant 3 / Load More</div>
    <div class="load-more-counter" id="loadmore-counter"></div>
    <div class="content-area" id="loadmore-content" style="min-height:auto"></div>
    <button class="load-more-btn" id="loadmore-btn">Load More</button>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/Flip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/TextPlugin.min.js"></script>
<script src="../animations/gsap-utils.js"></script>
<script>
gsap.registerPlugin(ScrollTrigger, Flip, TextPlugin);

(function(){
  'use strict';

  var reducedMotion = UV.prefersReducedMotion;
  var TOTAL = 97;
  var PER_PAGE = 10;
  var TOTAL_PAGES = Math.ceil(TOTAL / PER_PAGE);

  // ─── Demo data ─────────────────────────────────
  var titles = [
    'Getting Started with Design Systems',
    'Advanced Typography for the Web',
    'Building Accessible Components',
    'Performance-First CSS Architecture',
    'Responsive Layouts with CSS Grid',
    'Color Theory in Digital Interfaces',
    'Micro-Interactions That Delight Users',
    'From Wireframe to Production Code',
    'Scaling UI Components at Startups',
    'Motion Design Principles for UI',
    'Dark Mode Implementation Guide',
    'Semantic HTML Best Practices',
    'Progressive Enhancement Strategies',
    'CSS Custom Properties Deep Dive',
    'Component Libraries vs Design Tokens',
  ];
  var descs = [
    'Learn how to establish a consistent foundation for your product interface.',
    'Explore type scales, font pairing, and vertical rhythm techniques.',
    'ARIA patterns, keyboard navigation, and screen reader testing.',
    'Strategies for shipping fast, maintainable stylesheets.',
    'Master auto-fill, minmax, and named grid areas.',
    'OKLCH, contrast ratios, and palette generation.',
    'Hover states, focus rings, and loading indicators.',
    'Translating design intent into production-ready HTML and CSS.',
    'Patterns for growing component libraries with small teams.',
    'GSAP, scroll-driven animation, and orchestration techniques.',
    'CSS variables, flash prevention, and system preference detection.',
    'Using the right elements for structure and accessibility.',
    'Building resilient interfaces that work for everyone.',
    'Dynamic theming and runtime style manipulation.',
    'When to use each approach and how they complement.',
  ];

  function getItem(globalIdx) {
    var day = ((globalIdx * 3) % 28) + 1;
    var month = ((globalIdx * 2) % 12) + 1;
    return {
      num: globalIdx + 1,
      title: titles[globalIdx % titles.length],
      desc: descs[globalIdx % descs.length],
      date: '2026-' + String(month).padStart(2, '0') + '-' + String(day).padStart(2, '0'),
    };
  }

  // ─── DOM helpers (safe, no innerHTML) ──────────
  function createEl(tag, cls, text) {
    var el = document.createElement(tag);
    if (cls) el.className = cls;
    if (text) el.textContent = text;
    return el;
  }

  function renderCard(item) {
    var card = createEl('div', 'item-card');
    var num = createEl('div', 'item-num', String(item.num));
    var body = createEl('div', 'item-body');
    body.appendChild(createEl('div', 'item-title', item.title));
    body.appendChild(createEl('div', 'item-desc', item.desc));
    body.appendChild(createEl('div', 'item-date', item.date));
    card.appendChild(num);
    card.appendChild(body);
    return card;
  }

  function renderSkeletons(container, count) {
    container.textContent = '';
    for (var i = 0; i < count; i++) {
      var sk = createEl('div', 'skeleton-card');
      sk.appendChild(createEl('div', 'skel-box skel-num'));
      var body = createEl('div', 'skel-body');
      body.appendChild(createEl('div', 'skel-box skel-title'));
      body.appendChild(createEl('div', 'skel-box skel-text'));
      var short = createEl('div', 'skel-box skel-text short');
      body.appendChild(short);
      sk.appendChild(body);
      container.appendChild(sk);
    }
  }

  function shimmerSkeletons(container) {
    var boxes = container.querySelectorAll('.skel-box');
    if (!reducedMotion && boxes.length) {
      gsap.fromTo(boxes,
        { opacity: 0.4 },
        { opacity: 1, duration: 0.8, ease: 'sine.inOut', stagger: 0.03, repeat: -1, yoyo: true }
      );
    }
  }

  function setResultsText(el, start, end, total) {
    el.textContent = '';
    el.appendChild(document.createTextNode('Showing '));
    var s1 = createEl('strong', null, start + '-' + end);
    el.appendChild(s1);
    el.appendChild(document.createTextNode(' of '));
    var s2 = createEl('strong', null, String(total));
    el.appendChild(s2);
    el.appendChild(document.createTextNode(' results'));
  }

  function fillContent(container, start, end) {
    container.textContent = '';
    for (var i = start; i < end; i++) {
      container.appendChild(renderCard(getItem(i)));
    }
  }

  // ─── VARIANT 1: Classic ────────────────────────
  var classicPage = 1;
  var classicContent = document.getElementById('classic-content');
  var classicPag = document.getElementById('classic-pagination');
  var classicResults = document.getElementById('classic-results');
  var gotoInput = document.getElementById('goto-input');

  function classicSetPage(page) {
    if (page < 1 || page > TOTAL_PAGES || page === classicPage) return;
    classicPage = page;
    var start = (page - 1) * PER_PAGE;
    var end = Math.min(start + PER_PAGE, TOTAL);

    setResultsText(classicResults, start + 1, end, TOTAL);

    if (!reducedMotion) {
      gsap.to(classicContent.children, {
        opacity: 0, y: -10, duration: 0.25, ease: 'power2.in', stagger: 0.02,
        onComplete: function () {
          renderSkeletons(classicContent, PER_PAGE);
          shimmerSkeletons(classicContent);
          gsap.delayedCall(0.6, function () {
            fillContent(classicContent, start, end);
            gsap.from(classicContent.children, {
              opacity: 0, y: 20, duration: 0.35, ease: 'power3.out', stagger: 0.04,
            });
          });
        },
      });
    } else {
      fillContent(classicContent, start, end);
    }
    renderClassicPagination();
  }

  function buildPageNumbers(current, total) {
    if (total <= 7) {
      var arr = [];
      for (var i = 1; i <= total; i++) arr.push(i);
      return arr;
    }
    var pages = [1];
    if (current > 3) pages.push('...');
    var lo = Math.max(2, current - 1);
    var hi = Math.min(total - 1, current + 1);
    for (var j = lo; j <= hi; j++) pages.push(j);
    if (current < total - 2) pages.push('...');
    pages.push(total);
    return pages;
  }

  function renderClassicPagination() {
    classicPag.textContent = '';

    // Prev
    var prev = createEl('button', 'pg-btn');
    var prevArrow = createEl('span', 'arrow');
    prevArrow.innerHTML = '&#8592;';
    prev.appendChild(prevArrow);
    prev.setAttribute('aria-label', 'Previous page');
    if (classicPage === 1) prev.disabled = true;
    prev.addEventListener('click', function () { classicSetPage(classicPage - 1); });
    classicPag.appendChild(prev);

    // Page numbers
    var pages = buildPageNumbers(classicPage, TOTAL_PAGES);
    pages.forEach(function (p) {
      if (p === '...') {
        var ell = createEl('span', 'pg-ellipsis', '...');
        ell.setAttribute('aria-hidden', 'true');
        classicPag.appendChild(ell);
      } else {
        var btn = createEl('button', 'pg-btn', String(p));
        btn.setAttribute('aria-label', 'Page ' + p);
        if (p === classicPage) {
          btn.setAttribute('aria-current', 'page');
          if (!reducedMotion) {
            gsap.fromTo(btn, { scale: 1.12 }, { scale: 1, duration: 0.3, ease: 'back.out(2)' });
          }
        }
        btn.addEventListener('click', (function (num) {
          return function () { classicSetPage(num); };
        })(p));
        classicPag.appendChild(btn);
      }
    });

    // Next
    var next = createEl('button', 'pg-btn');
    var nextArrow = createEl('span', 'arrow');
    nextArrow.innerHTML = '&#8594;';
    next.appendChild(nextArrow);
    next.setAttribute('aria-label', 'Next page');
    if (classicPage === TOTAL_PAGES) next.disabled = true;
    next.addEventListener('click', function () { classicSetPage(classicPage + 1); });
    classicPag.appendChild(next);

    // Hover on page buttons
    if (!reducedMotion) {
      classicPag.querySelectorAll('.pg-btn:not([disabled])').forEach(function (btn) {
        btn.addEventListener('mouseenter', function () {
          gsap.to(btn, { scale: 1.08, duration: 0.2, ease: 'power2.out' });
        });
        btn.addEventListener('mouseleave', function () {
          gsap.to(btn, { scale: 1, duration: 0.2, ease: 'power2.out' });
        });
      });
    }
  }

  // Go-to input
  gotoInput.addEventListener('keydown', function (e) {
    if (e.key === 'Enter') {
      var val = parseInt(gotoInput.value);
      if (val >= 1 && val <= TOTAL_PAGES) {
        classicSetPage(val);
        gotoInput.value = '';
      }
    }
  });

  // Keyboard arrow nav
  document.addEventListener('keydown', function (e) {
    var tag = document.activeElement && document.activeElement.tagName;
    if (tag === 'INPUT' || tag === 'TEXTAREA') return;
    if (e.key === 'ArrowLeft') classicSetPage(classicPage - 1);
    if (e.key === 'ArrowRight') classicSetPage(classicPage + 1);
  });

  // ─── VARIANT 2: Simple ─────────────────────────
  var simplePage = 1;
  var simpleContent = document.getElementById('simple-content');
  var simpleInfo = document.getElementById('simple-info');
  var simpleResults = document.getElementById('simple-results');
  var simplePrev = document.getElementById('simple-prev');
  var simpleNext = document.getElementById('simple-next');

  function updateSimpleInfo() {
    simpleInfo.textContent = '';
    simpleInfo.appendChild(document.createTextNode('Page '));
    simpleInfo.appendChild(createEl('strong', null, String(simplePage)));
    simpleInfo.appendChild(document.createTextNode(' of '));
    simpleInfo.appendChild(createEl('strong', null, String(TOTAL_PAGES)));
  }

  function simpleSetPage(page) {
    if (page < 1 || page > TOTAL_PAGES || page === simplePage) return;
    simplePage = page;
    var start = (page - 1) * PER_PAGE;
    var end = Math.min(start + PER_PAGE, TOTAL);

    setResultsText(simpleResults, start + 1, end, TOTAL);
    updateSimpleInfo();
    simplePrev.disabled = page === 1;
    simpleNext.disabled = page === TOTAL_PAGES;

    if (!reducedMotion) {
      gsap.to(simpleContent.children, {
        opacity: 0, y: -10, duration: 0.25, ease: 'power2.in', stagger: 0.02,
        onComplete: function () {
          renderSkeletons(simpleContent, PER_PAGE);
          shimmerSkeletons(simpleContent);
          gsap.delayedCall(0.6, function () {
            fillContent(simpleContent, start, end);
            gsap.from(simpleContent.children, {
              opacity: 0, y: 20, duration: 0.35, ease: 'power3.out', stagger: 0.04,
            });
          });
        },
      });
    } else {
      fillContent(simpleContent, start, end);
    }
  }

  simplePrev.addEventListener('click', function () { simpleSetPage(simplePage - 1); });
  simpleNext.addEventListener('click', function () { simpleSetPage(simplePage + 1); });

  if (!reducedMotion) {
    [simplePrev, simpleNext].forEach(function (btn) {
      btn.addEventListener('mouseenter', function () {
        if (!btn.disabled) gsap.to(btn, { scale: 1.05, duration: 0.2, ease: 'power2.out' });
      });
      btn.addEventListener('mouseleave', function () {
        gsap.to(btn, { scale: 1, duration: 0.2, ease: 'power2.out' });
      });
    });
  }

  // ─── VARIANT 3: Load More ──────────────────────
  var loadedCount = 0;
  var LOAD_TOTAL = 25;
  var LOAD_BATCH = 5;
  var loadmoreContent = document.getElementById('loadmore-content');
  var loadmoreCounter = document.getElementById('loadmore-counter');
  var loadmoreBtn = document.getElementById('loadmore-btn');

  function updateLoadCounter() {
    loadmoreCounter.textContent = '';
    loadmoreCounter.appendChild(document.createTextNode('Showing '));
    loadmoreCounter.appendChild(createEl('strong', null, String(loadedCount)));
    loadmoreCounter.appendChild(document.createTextNode(' of '));
    loadmoreCounter.appendChild(createEl('strong', null, String(LOAD_TOTAL)));
  }

  function loadMoreItems() {
    var start = loadedCount;
    var end = Math.min(start + LOAD_BATCH, LOAD_TOTAL);
    if (start >= LOAD_TOTAL) return;

    var newCards = [];
    for (var i = start; i < end; i++) {
      var card = renderCard(getItem(i));
      gsap.set(card, { opacity: 0, y: 30 });
      loadmoreContent.appendChild(card);
      newCards.push(card);
    }

    loadedCount = end;
    updateLoadCounter();

    if (loadedCount >= LOAD_TOTAL) {
      loadmoreBtn.disabled = true;
      loadmoreBtn.textContent = 'All items loaded';
    }

    if (!reducedMotion) {
      gsap.to(newCards, { opacity: 1, y: 0, duration: 0.4, ease: 'power3.out', stagger: 0.06 });
    } else {
      gsap.set(newCards, { opacity: 1, y: 0 });
    }
  }

  loadmoreBtn.addEventListener('click', loadMoreItems);

  if (!reducedMotion) {
    loadmoreBtn.addEventListener('mouseenter', function () {
      if (!loadmoreBtn.disabled) {
        gsap.to(loadmoreBtn, { scale: 1.04, duration: 0.25, ease: 'power2.out' });
      }
    });
    loadmoreBtn.addEventListener('mouseleave', function () {
      gsap.to(loadmoreBtn, { scale: 1, duration: 0.25, ease: 'power2.out' });
    });
  }

  // ─── Initial render ────────────────────────────
  setResultsText(classicResults, 1, PER_PAGE, TOTAL);
  fillContent(classicContent, 0, PER_PAGE);
  renderClassicPagination();

  setResultsText(simpleResults, 1, PER_PAGE, TOTAL);
  fillContent(simpleContent, 0, PER_PAGE);
  updateSimpleInfo();

  for (var k = 0; k < LOAD_BATCH; k++) {
    loadmoreContent.appendChild(renderCard(getItem(k)));
  }
  loadedCount = LOAD_BATCH;
  updateLoadCounter();

  // ─── Page entrance ─────────────────────────────
  UV.initPage({
    title: '.page-title',
    subtitle: '.page-sub',
    content: '.section-block',
  });

  UV.scrollReveal('#simple-section', { trigger: '#simple-section', stagger: 0 });
  UV.scrollReveal('#loadmore-section', { trigger: '#loadmore-section', stagger: 0 });

  UV.addControlPanel();
})();
</script>
</body>
</html>
