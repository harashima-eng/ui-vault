<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi-Step Form</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

:root{
  --accent:oklch(0.62 0.14 195);
  --accent-hover:oklch(0.56 0.14 195);
  --accent-soft:oklch(0.62 0.14 195 / 0.12);
  --accent-ring:oklch(0.62 0.14 195 / 0.25);
  --bg:oklch(0.965 0.005 260);
  --card:oklch(0.995 0.002 260);
  --text:oklch(0.18 0.01 260);
  --text-muted:oklch(0.48 0.015 260);
  --border:oklch(0.88 0.008 260);
  --border-focus:var(--accent);
  --line-done:var(--accent);
  --line-pending:oklch(0.90 0.005 260);
  --step-pending-bg:oklch(0.96 0.005 260);
  --step-pending-text:oklch(0.55 0.01 260);
  --success:oklch(0.62 0.16 155);
  --success-soft:oklch(0.62 0.16 155 / 0.12);
  --shadow-lg:0 10px 30px oklch(0.18 0.01 260 / 0.08), 0 4px 12px oklch(0.18 0.01 260 / 0.04);
  --radius:16px;
  --radius-sm:10px;
  --radius-xs:8px;
  --duration:0.4s;
  --ease:cubic-bezier(0.4, 0, 0.15, 1);
}

body{
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
  min-height:100dvh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px 16px;
  line-height:1.5;
  -webkit-font-smoothing:antialiased;
}

/* --- Card Shell --- */
.wizard{
  width:100%;
  max-width:520px;
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow-lg);
  overflow:hidden;
  border:1px solid var(--border);
}

.wizard-header{
  padding:32px 32px 28px;
  border-bottom:1px solid var(--border);
}

.wizard-body{
  position:relative;
  overflow:hidden;
  min-height:280px;
}

.wizard-footer{
  padding:20px 32px 28px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
}

/* --- Progress Stepper --- */
.stepper{
  display:flex;
  align-items:center;
  gap:0;
  position:relative;
}

.step-item{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:8px;
  position:relative;
  z-index:1;
  flex:0 0 auto;
}

.step-circle{
  width:36px;
  height:36px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
  font-weight:700;
  border:2px solid var(--border);
  background:var(--step-pending-bg);
  color:var(--step-pending-text);
  transition:background-color var(--duration) var(--ease),
             border-color var(--duration) var(--ease),
             color var(--duration) var(--ease),
             transform 0.25s var(--ease);
  position:relative;
}

.step-circle svg{
  width:16px;
  height:16px;
  opacity:0;
  position:absolute;
  transition:opacity 0.2s ease;
}

.step-label{
  font-size:12px;
  font-weight:600;
  letter-spacing:0.02em;
  color:var(--text-muted);
  white-space:nowrap;
  transition:color var(--duration) var(--ease);
}

/* Connector line */
.step-connector{
  flex:1;
  height:2px;
  background:var(--line-pending);
  position:relative;
  margin:0 -2px;
  align-self:flex-start;
  margin-top:17px;
  z-index:0;
}

.step-connector-fill{
  position:absolute;
  top:0;left:0;
  height:100%;
  width:0%;
  background:var(--line-done);
  transition:width var(--duration) var(--ease);
}

/* Step states */
.step-item[data-state="completed"] .step-circle{
  background:var(--accent);
  border-color:var(--accent);
  color:var(--card);
}
.step-item[data-state="completed"] .step-circle span{opacity:0}
.step-item[data-state="completed"] .step-circle svg{opacity:1}
.step-item[data-state="completed"] .step-label{color:var(--accent)}

.step-item[data-state="active"] .step-circle{
  background:var(--accent-soft);
  border-color:var(--accent);
  color:var(--accent);
  transform:scale(1.08);
}
.step-item[data-state="active"] .step-label{
  color:var(--text);
}

/* --- Step Panels --- */
.step-panel{
  position:absolute;
  top:0;left:0;
  width:100%;
  padding:28px 32px;
  opacity:0;
  transform:translateX(60px);
  transition:transform var(--duration) var(--ease),
             opacity var(--duration) var(--ease);
  pointer-events:none;
}

.step-panel[data-visible="true"]{
  opacity:1;
  transform:translateX(0);
  pointer-events:auto;
  position:relative;
}

.step-panel[data-exit="left"]{
  opacity:0;
  transform:translateX(-60px);
}

/* --- Form Elements --- */
.form-group{margin-bottom:20px}
.form-group:last-child{margin-bottom:0}

.form-label{
  display:block;
  font-size:13px;
  font-weight:600;
  color:var(--text);
  margin-bottom:6px;
  letter-spacing:0.01em;
}

.form-input{
  width:100%;
  padding:10px 14px;
  font-size:15px;
  font-family:inherit;
  color:var(--text);
  background:var(--card);
  border:1.5px solid var(--border);
  border-radius:var(--radius-xs);
  outline:none;
  transition:border-color 0.2s ease,
             box-shadow 0.2s ease;
}

.form-input::placeholder{color:oklch(0.65 0.01 260)}

.form-input:focus{
  border-color:var(--border-focus);
  box-shadow:0 0 0 3px var(--accent-ring);
}

.form-input:hover:not(:focus){
  border-color:oklch(0.75 0.01 260);
}

/* --- Toggle Switches --- */
.toggle-list{display:flex;flex-direction:column;gap:14px}

.toggle-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding:12px 16px;
  background:oklch(0.975 0.004 260);
  border:1px solid var(--border);
  border-radius:var(--radius-sm);
  cursor:pointer;
  transition:border-color 0.2s ease,
             background-color 0.2s ease;
  user-select:none;
}

.toggle-row:hover{
  border-color:oklch(0.78 0.01 260);
  background:oklch(0.97 0.005 260);
}

.toggle-row:focus-within{
  border-color:var(--accent);
  box-shadow:0 0 0 3px var(--accent-ring);
}

.toggle-text{
  display:flex;
  flex-direction:column;
  gap:2px;
}

.toggle-title{font-size:14px;font-weight:600;color:var(--text)}
.toggle-desc{font-size:12px;color:var(--text-muted)}

.toggle-switch{
  position:relative;
  width:44px;
  height:24px;
  flex-shrink:0;
}

.toggle-switch input{
  position:absolute;
  opacity:0;
  width:0;height:0;
}

.toggle-track{
  position:absolute;
  inset:0;
  background:oklch(0.82 0.01 260);
  border-radius:12px;
  transition:background-color 0.25s ease;
  cursor:pointer;
}

.toggle-track::after{
  content:"";
  position:absolute;
  top:2px;left:2px;
  width:20px;height:20px;
  background:white;
  border-radius:50%;
  box-shadow:0 1px 3px oklch(0 0 0 / 0.15);
  transition:transform 0.25s cubic-bezier(0.34, 1.4, 0.64, 1);
}

.toggle-switch input:checked+.toggle-track{
  background:var(--accent);
}

.toggle-switch input:checked+.toggle-track::after{
  transform:translateX(20px);
}

.toggle-switch input:focus-visible+.toggle-track{
  outline:2px solid var(--accent);
  outline-offset:2px;
}

/* --- Confirmation Step --- */
.confirm-section{margin-bottom:20px}
.confirm-section:last-child{margin-bottom:0}

.confirm-heading{
  font-size:11px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:0.08em;
  color:var(--text-muted);
  margin-bottom:8px;
}

.confirm-grid{
  display:grid;
  gap:6px;
}

.confirm-row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:14px;
  padding:6px 0;
}

.confirm-row .label{color:var(--text-muted);font-weight:500}
.confirm-row .value{color:var(--text);font-weight:600;text-align:right}

.confirm-tags{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin-top:4px;
}

.confirm-tag{
  font-size:12px;
  font-weight:600;
  padding:4px 10px;
  border-radius:20px;
  background:var(--accent-soft);
  color:var(--accent);
}

.confirm-tag.off{
  background:oklch(0.94 0.005 260);
  color:var(--text-muted);
  text-decoration:line-through;
}

/* Success checkmark */
.success-badge{
  width:48px;height:48px;
  border-radius:50%;
  background:var(--success-soft);
  display:flex;
  align-items:center;
  justify-content:center;
  margin-bottom:16px;
}

.success-badge svg{
  width:24px;height:24px;
  color:var(--success);
  stroke-dasharray:24;
  stroke-dashoffset:24;
}

.step-panel[data-visible="true"] .success-badge svg{
  animation:check-draw 0.5s 0.3s var(--ease) forwards;
}

@keyframes check-draw{
  to{stroke-dashoffset:0}
}

.success-title{
  font-size:20px;
  font-weight:700;
  margin-bottom:4px;
  text-wrap:balance;
}

.success-subtitle{
  font-size:14px;
  color:var(--text-muted);
  margin-bottom:24px;
}

/* --- Buttons --- */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;
  padding:10px 22px;
  font-size:14px;
  font-weight:600;
  font-family:inherit;
  border-radius:var(--radius-xs);
  border:none;
  cursor:pointer;
  transition:background-color 0.2s ease,
             transform 0.15s ease,
             box-shadow 0.2s ease;
  outline:none;
}

.btn:focus-visible{
  outline:2px solid var(--accent);
  outline-offset:2px;
}

.btn:active{transform:scale(0.97)}

.btn-primary{
  background:var(--accent);
  color:white;
}
.btn-primary:hover{background:var(--accent-hover)}

.btn-secondary{
  background:transparent;
  color:var(--text-muted);
  border:1.5px solid var(--border);
}
.btn-secondary:hover{
  background:oklch(0.96 0.005 260);
  color:var(--text);
  border-color:oklch(0.80 0.01 260);
}

.btn-ghost{
  background:transparent;
  color:var(--text-muted);
}
.btn-ghost:hover{color:var(--text)}

.btn svg{width:16px;height:16px}

.btn-spacer{flex:1}

/* submitted state overlay */
.submitted-overlay{
  position:absolute;
  inset:0;
  background:var(--card);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  padding:32px;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.4s ease;
  z-index:10;
}

.submitted-overlay.show{
  opacity:1;
  pointer-events:auto;
}

/* --- Reduced Motion --- */
@media(prefers-reduced-motion:reduce){
  *,*::before,*::after{
    transition-duration:0.01ms !important;
    animation-duration:0.01ms !important;
  }
  .step-panel{transform:none !important}
  .step-panel[data-exit="left"]{transform:none !important}
}

/* --- Responsive --- */
@media(max-width:480px){
  .wizard-header{padding:24px 20px 22px}
  .step-panel{padding:22px 20px}
  .wizard-footer{padding:16px 20px 22px}
  .step-label{font-size:11px}
  .step-circle{width:32px;height:32px;font-size:13px}
  .step-connector{margin-top:15px}
}
</style>
</head>
<body>

<div class="wizard" role="form" aria-label="Multi-step registration form">
  <div class="wizard-header">
    <div class="stepper" role="list" aria-label="Form progress">
      <div class="step-item" data-state="active" role="listitem" aria-current="step">
        <div class="step-circle">
          <span>1</span>
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <span class="step-label">Personal Info</span>
      </div>

      <div class="step-connector"><div class="step-connector-fill"></div></div>

      <div class="step-item" data-state="pending" role="listitem">
        <div class="step-circle">
          <span>2</span>
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <span class="step-label">Preferences</span>
      </div>

      <div class="step-connector"><div class="step-connector-fill"></div></div>

      <div class="step-item" data-state="pending" role="listitem">
        <div class="step-circle">
          <span>3</span>
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
        </div>
        <span class="step-label">Confirmation</span>
      </div>
    </div>
  </div>

  <div class="wizard-body">
    <!-- Step 1: Personal Info -->
    <div class="step-panel" data-step="1" data-visible="true">
      <div class="form-group">
        <label class="form-label" for="name">Full Name</label>
        <input class="form-input" type="text" id="name" placeholder="Jane Doe" autocomplete="name">
      </div>
      <div class="form-group">
        <label class="form-label" for="email">Email Address</label>
        <input class="form-input" type="email" id="email" placeholder="jane@example.com" autocomplete="email">
      </div>
      <div class="form-group">
        <label class="form-label" for="phone">Phone Number</label>
        <input class="form-input" type="tel" id="phone" placeholder="+1 (555) 000-0000" autocomplete="tel">
      </div>
    </div>

    <!-- Step 2: Preferences -->
    <div class="step-panel" data-step="2">
      <div class="toggle-list">
        <label class="toggle-row">
          <div class="toggle-text">
            <span class="toggle-title">Email notifications</span>
            <span class="toggle-desc">Receive updates about your account</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="pref-email" checked>
            <div class="toggle-track"></div>
          </div>
        </label>

        <label class="toggle-row">
          <div class="toggle-text">
            <span class="toggle-title">Dark mode</span>
            <span class="toggle-desc">Use a darker color scheme</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="pref-dark">
            <div class="toggle-track"></div>
          </div>
        </label>

        <label class="toggle-row">
          <div class="toggle-text">
            <span class="toggle-title">Weekly digest</span>
            <span class="toggle-desc">Summary of activity every Monday</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="pref-digest" checked>
            <div class="toggle-track"></div>
          </div>
        </label>

        <label class="toggle-row">
          <div class="toggle-text">
            <span class="toggle-title">Beta features</span>
            <span class="toggle-desc">Try experimental features early</span>
          </div>
          <div class="toggle-switch">
            <input type="checkbox" id="pref-beta">
            <div class="toggle-track"></div>
          </div>
        </label>
      </div>
    </div>

    <!-- Step 3: Confirmation -->
    <div class="step-panel" data-step="3">
      <div class="success-badge">
        <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
      </div>
      <div class="success-title">Review your details</div>
      <div class="success-subtitle">Everything look good? Hit submit to finish.</div>

      <div class="confirm-section">
        <div class="confirm-heading">Personal Info</div>
        <div class="confirm-grid">
          <div class="confirm-row"><span class="label">Name</span><span class="value" id="c-name">--</span></div>
          <div class="confirm-row"><span class="label">Email</span><span class="value" id="c-email">--</span></div>
          <div class="confirm-row"><span class="label">Phone</span><span class="value" id="c-phone">--</span></div>
        </div>
      </div>

      <div class="confirm-section">
        <div class="confirm-heading">Preferences</div>
        <div class="confirm-tags" id="c-prefs"></div>
      </div>
    </div>

    <!-- Submitted overlay -->
    <div class="submitted-overlay" id="submitted">
      <div class="success-badge" style="width:56px;height:56px;margin-bottom:20px">
        <svg id="submit-check" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="width:28px;height:28px;stroke-dasharray:24;stroke-dashoffset:0"><polyline points="20 6 9 17 4 12"/></svg>
      </div>
      <div class="success-title">All done!</div>
      <div class="success-subtitle" style="margin-bottom:20px">Your information has been submitted successfully.</div>
      <button class="btn btn-secondary" id="btn-reset">Start over</button>
    </div>
  </div>

  <div class="wizard-footer">
    <button class="btn btn-ghost" id="btn-back" style="visibility:hidden" aria-label="Go to previous step">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
      Back
    </button>
    <div class="btn-spacer"></div>
    <button class="btn btn-primary" id="btn-next" aria-label="Go to next step">
      <span id="btn-next-text">Next</span>
      <svg id="btn-next-arrow" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"/></svg>
      <svg id="btn-next-check" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display:none"><polyline points="20 6 9 17 4 12"/></svg>
    </button>
  </div>
</div>

<script>
(function(){
  var current = 1;
  var total = 3;
  var steps = document.querySelectorAll('.step-item');
  var connectors = document.querySelectorAll('.step-connector-fill');
  var panels = document.querySelectorAll('.step-panel');
  var btnBack = document.getElementById('btn-back');
  var btnNext = document.getElementById('btn-next');
  var btnNextText = document.getElementById('btn-next-text');
  var btnNextArrow = document.getElementById('btn-next-arrow');
  var btnNextCheck = document.getElementById('btn-next-check');
  var btnReset = document.getElementById('btn-reset');

  function updateStepper(){
    steps.forEach(function(s,i){
      var num = i+1;
      if(num < current){ s.dataset.state = 'completed'; s.removeAttribute('aria-current'); }
      else if(num === current){ s.dataset.state = 'active'; s.setAttribute('aria-current','step'); }
      else{ s.dataset.state = 'pending'; s.removeAttribute('aria-current'); }
    });
    connectors.forEach(function(c,i){
      if(i+1 < current) c.style.width = '100%';
      else if(i+1 === current) c.style.width = '50%';
      else c.style.width = '0%';
    });
  }

  function showPanel(next, direction){
    var leaving = document.querySelector('.step-panel[data-visible="true"]');
    var entering = document.querySelector('.step-panel[data-step="'+next+'"]');
    if(!entering) return;

    if(leaving){
      leaving.style.transform = direction === 'forward' ? 'translateX(-60px)' : 'translateX(60px)';
      leaving.style.opacity = '0';
      leaving.style.pointerEvents = 'none';
      leaving.dataset.visible = 'false';
    }

    entering.style.transform = direction === 'forward' ? 'translateX(60px)' : 'translateX(-60px)';
    entering.style.opacity = '0';

    // Force reflow for transition
    void entering.offsetWidth;

    entering.dataset.visible = 'true';
    entering.style.transform = 'translateX(0)';
    entering.style.opacity = '1';
    entering.style.pointerEvents = 'auto';
  }

  function updateButtons(){
    btnBack.style.visibility = current === 1 ? 'hidden' : 'visible';
    if(current === total){
      btnNextText.textContent = 'Submit';
      btnNextArrow.style.display = 'none';
      btnNextCheck.style.display = '';
      btnNext.setAttribute('aria-label','Submit form');
    } else {
      btnNextText.textContent = 'Next';
      btnNextArrow.style.display = '';
      btnNextCheck.style.display = 'none';
      btnNext.setAttribute('aria-label','Go to next step');
    }
  }

  function populateConfirmation(){
    var nameVal = document.getElementById('name').value || '--';
    var emailVal = document.getElementById('email').value || '--';
    var phoneVal = document.getElementById('phone').value || '--';
    document.getElementById('c-name').textContent = nameVal;
    document.getElementById('c-email').textContent = emailVal;
    document.getElementById('c-phone').textContent = phoneVal;

    var prefs = [
      {id:'pref-email', label:'Email notifications'},
      {id:'pref-dark', label:'Dark mode'},
      {id:'pref-digest', label:'Weekly digest'},
      {id:'pref-beta', label:'Beta features'}
    ];

    var container = document.getElementById('c-prefs');
    while(container.firstChild) container.removeChild(container.firstChild);
    prefs.forEach(function(p){
      var checked = document.getElementById(p.id).checked;
      var tag = document.createElement('span');
      tag.className = 'confirm-tag' + (checked ? '' : ' off');
      tag.textContent = p.label;
      container.appendChild(tag);
    });
  }

  function resetForm(){
    current = 1;
    document.getElementById('submitted').classList.remove('show');
    document.getElementById('name').value = '';
    document.getElementById('email').value = '';
    document.getElementById('phone').value = '';
    document.getElementById('pref-email').checked = true;
    document.getElementById('pref-dark').checked = false;
    document.getElementById('pref-digest').checked = true;
    document.getElementById('pref-beta').checked = false;
    panels.forEach(function(p){
      p.dataset.visible = 'false';
      p.style.opacity = '0';
      p.style.transform = 'translateX(60px)';
      p.style.pointerEvents = 'none';
    });
    var first = document.querySelector('.step-panel[data-step="1"]');
    first.dataset.visible = 'true';
    first.style.opacity = '1';
    first.style.transform = 'translateX(0)';
    first.style.pointerEvents = 'auto';
    updateStepper();
    updateButtons();
  }

  btnNext.addEventListener('click', function(){
    if(current === total){
      document.getElementById('submitted').classList.add('show');
      var svg = document.getElementById('submit-check');
      svg.style.strokeDashoffset = '24';
      void svg.offsetWidth;
      svg.style.transition = 'stroke-dashoffset 0.5s cubic-bezier(0.4, 0, 0.15, 1)';
      svg.style.strokeDashoffset = '0';
      return;
    }
    if(current === 2) populateConfirmation();
    current++;
    showPanel(current, 'forward');
    updateStepper();
    updateButtons();
  });

  btnBack.addEventListener('click', function(){
    if(current <= 1) return;
    current--;
    showPanel(current, 'backward');
    updateStepper();
    updateButtons();
  });

  btnReset.addEventListener('click', resetForm);

  // Keyboard: Enter on inputs advances step
  document.querySelectorAll('.form-input').forEach(function(input){
    input.addEventListener('keydown', function(e){
      if(e.key === 'Enter'){ e.preventDefault(); btnNext.click(); }
    });
  });

  // Init
  updateStepper();
  updateButtons();
})();
</script>
</body>
</html>
